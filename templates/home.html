<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIOps - ML Model Deployment Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f0f1e 0%, #1a1a2e 100%);
            color: #e0e0e0;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 80px;
            animation: slideDown 0.6s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .logo-icon {
            font-size: 48px;
            color: #00d4ff;
        }

        h1 {
            font-size: 3em;
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 1.1em;
            color: #b0b0b0;
            font-weight: 300;
        }

        .authors {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #00d4ff;
            font-size: 0.95em;
        }

        .nav-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 60px;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #1f1f3a 0%, #2a2a45 100%);
            border: 2px solid #00d4ff;
            color: #00d4ff;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            font-size: 0.95em;
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            color: #0f0f1e;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .nav-btn i {
            font-size: 20px;
        }

        .content-section {
            background: rgba(30, 30, 50, 0.6);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.8em;
            margin-bottom: 25px;
            color: #00d4ff;
        }

        .section-title i {
            font-size: 32px;
        }

        h2 {
            color: #00d4ff;
        }

        h3 {
            color: #0099ff;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        p {
            margin-bottom: 15px;
            color: #d0d0d0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(0, 212, 255, 0.05);
            border-left: 4px solid #00d4ff;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            background: rgba(0, 212, 255, 0.1);
            transform: translateX(5px);
        }

        .feature-card h4 {
            color: #00d4ff;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-card i {
            font-size: 20px;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            color: #00ff88;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .step-list {
            list-style: none;
            counter-reset: step-counter;
        }

        .step-list li {
            counter-increment: step-counter;
            margin: 20px 0;
            padding-left: 40px;
            position: relative;
            color: #d0d0d0;
        }

        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            color: #0f0f1e;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9em;
        }

        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }

        .tech-badge {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            color: #00d4ff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tech-badge i {
            font-size: 16px;
        }

        .footer {
            text-align: center;
            padding-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #808080;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .content-section {
                padding: 25px;
            }

            .nav-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-section">
                <i class="material-icons logo-icon">psychology</i>
            </div>
            <h1>AIOps Platform</h1>
            <p class="subtitle">Distributed ML Model Deployment with Flask & Docker</p>
            <div class="authors">
                <strong>Developed by:</strong> Oussama Elfaqyr & Ayoub Mourou
            </div>
        </header>

        <div class="nav-buttons">
            <a href="/predict" class="nav-btn">
                <i class="material-icons">image</i>
                Object Detection
            </a>
            <a href="/regpredict" class="nav-btn">
                <i class="material-icons">trending_up</i>
                Regression
            </a>
            <a href="/textgen" class="nav-btn">
                <i class="material-icons">text_fields</i>
                Text Generation
            </a>
        </div>

        <!-- Overview Section -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">info</i>
                Project Overview
            </div>
            <p>This AIOps platform demonstrates a comprehensive solution for deploying multiple machine learning models in production using containerized microservices. The application integrates three distinct AI capabilities within a single Flask application, orchestrated through Docker for seamless deployment across distributed systems.</p>
            
            <h3>Core Capabilities</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4><i class="material-icons">image_search</i> VGG16 Object Recognition</h4>
                    <p>Real-time image classification using pre-trained VGG16 model from Keras with secure file upload handling.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="material-icons">assessment</i> ML Regression Model</h4>
                    <p>Salary prediction using pickled regression models with both HTML form and REST API endpoints.</p>
                </div>
                <div class="feature-card">
                    <h4><i class="material-icons">auto_awesome</i> Hugging Face LLM</h4>
                    <p>Text generation using state-of-the-art language models through local LLM integration.</p>
                </div>
            </div>
        </div>

        <!-- Technical Stack -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">build</i>
                Technical Stack
            </div>
            <div class="tech-stack">
                <div class="tech-badge"><i class="material-icons">language</i> Flask</div>
                <div class="tech-badge"><i class="material-icons">storage</i> Docker</div>
                <div class="tech-badge"><i class="material-icons">smart_toy</i> Keras/TensorFlow</div>
                <div class="tech-badge"><i class="material-icons">cloud</i> Python 3.9+</div>
                <div class="tech-badge"><i class="material-icons">security</i> Werkzeug</div>
                <div class="tech-badge"><i class="material-icons">api</i> REST API</div>
            </div>
        </div>

        <!-- Implementation Details -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">construction</i>
                Implementation Details
            </div>
            
            <h3>1. Object Detection Endpoint (/predict)</h3>
            <p>Deploys VGG16 model for image classification with secure file handling using <code>werkzeug.utils.secure_filename</code>.</p>
            <ul class="step-list">
                <li>Accepts image uploads (PNG, JPG, JPEG, GIF)</li>
                <li>Validates file types and sanitizes filenames</li>
                <li>Preprocesses images to 224x224 resolution</li>
                <li>Returns top prediction with confidence percentage</li>
            </ul>

            <h3>2. Regression Prediction Endpoint (/regpredict)</h3>
            <p>Serves pickled ML regression model for salary prediction with both web UI and API access.</p>
            <ul class="step-list">
                <li>Loads pre-trained model from model.pkl</li>
                <li>Accepts numeric features via HTML form</li>
                <li>Provides /predict_api for programmatic access</li>
                <li>Returns formatted predictions</li>
            </ul>

            <h3>3. Text Generation Endpoint (/textgen)</h3>
            <p>Integrates Hugging Face models through local LLM server for real-time text generation.</p>
            <ul class="step-list">
                <li>Connects to local LLM API (Ollama/LM Studio)</li>
                <li>Supports multi-turn conversations</li>
                <li>Persists chat history in JSON format</li>
                <li>Implements message save/load/delete functionality</li>
            </ul>
        </div>

        <!-- Security Features -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">security</i>
                Security Measures
            </div>
            <ul class="step-list">
                <li>File upload validation with whitelist extension checking</li>
                <li>Secure filename sanitization using werkzeug.utils.secure_filename</li>
                <li>Flask secret key configuration via environment variables</li>
                <li>CORS enabled for cross-origin requests</li>
                <li>Input validation on all endpoints</li>
            </ul>
        </div>

        <!-- Deployment Guide -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">cloud_upload</i>
                Deployment Instructions
            </div>

            <h3>Prerequisites</h3>
            <ul class="step-list">
                <li>Docker and Docker Compose installed</li>
                <li>Python 3.9+ (for local development)</li>
                <li>Pre-trained model files (model.pkl for regression)</li>
                <li>LLM service running on port 1234 (for text generation)</li>
            </ul>

            <h3>Quick Start - Docker Deployment</h3>
            <div class="code-block">
# Build Docker image
docker build -t aiops-flask-app .

# Run container with volume mounting
docker run -p 7000:7000 \
  -v $(pwd)/images:/app/images \
  -v $(pwd)/data:/app/data \
  --name aiops-app \
  aiops-flask-app
            </div>

            <h3>Using Docker Compose (Recommended)</h3>
            <div class="code-block">
# Start all services
docker-compose up -d

# View logs
docker-compose logs -f aiops-app

# Stop services
docker-compose down
            </div>

            <h3>Dockerfile</h3>
            <div class="code-block">
FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 7000

CMD ["python", "main.py"]
            </div>

            <h3>Docker Compose Configuration</h3>
            <div class="code-block">
version: '3.8'

services:
  aiops-app:
    build: .
    ports:
      - "7000:7000"
    volumes:
      - ./images:/app/images
      - ./data:/app/data
    environment:
      - FLASK_ENV=production
      - FLASK_SECRET=your-secret-key
    restart: always
            </div>

            <h3>Local Development Setup</h3>
            <div class="code-block">
# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Run application
python main.py

# Access at http://localhost:7000
            </div>

            <h3>Required dependencies (requirements.txt)</h3>
            <div class="code-block">
Flask==2.3.0
Flask-CORS==4.0.0
Keras==2.13.0
TensorFlow==2.13.0
Werkzeug==2.3.0
requests==2.31.0
numpy==1.24.0
scikit-learn==1.3.0
            </div>

            <h3>Full Automated Deployment Commands</h3>
            <div class="code-block">
# Step 1: Clone or prepare project
cd /path/to/project

# Step 2: Build Docker image
docker build -t aiops-flask-app:latest .

# Step 3: Create volumes and directories
mkdir -p images data

# Step 4: Deploy with Docker Compose
docker-compose up -d

# Step 5: Verify deployment
docker ps
curl http://localhost:7000/home

# Step 6: View application logs
docker-compose logs -f aiops-app

# Step 7: Scale if needed
docker-compose up -d --scale aiops-app=3
            </div>
        </div>

        <!-- Project Structure -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">folder_structure</i>
                Project Structure
            </div>
            <div class="code-block">
DS-DEVOIR3-PART1/
├── main.py                 # Flask application
├── model.pkl              # Pickled regression model
├── model.py               # Model training script
├── hiring.csv             # Training data
├── requirements.txt       # Python dependencies
├── Dockerfile             # Docker image definition
├── docker-compose.yml     # Docker orchestration
├── templates/
│   ├── home.html         # Home page
│   ├── image_classifier.html
│   ├── reg.html
│   └── llm.html
├── static/
│   └── style.css
└── images/               # Uploaded images directory
└── data/                 # Chat history directory
            </div>
        </div>

        <!-- Endpoints Reference -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">api</i>
                API Endpoints Reference
            </div>
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.2);">
                        <td style="padding: 12px; color: #00d4ff; font-weight: 600;">Endpoint</td>
                        <td style="padding: 12px; color: #00d4ff; font-weight: 600;">Method</td>
                        <td style="padding: 12px; color: #00d4ff; font-weight: 600;">Description</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">GET /home</td>
                        <td style="padding: 12px;">GET</td>
                        <td style="padding: 12px; color: #d0d0d0;">Project overview and documentation</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">GET/POST /predict</td>
                        <td style="padding: 12px;">GET/POST</td>
                        <td style="padding: 12px; color: #d0d0d0;">VGG16 image classification</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">GET/POST /regpredict</td>
                        <td style="padding: 12px;">GET/POST</td>
                        <td style="padding: 12px; color: #d0d0d0;">Regression prediction</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">POST /predict_api</td>
                        <td style="padding: 12px;">POST</td>
                        <td style="padding: 12px; color: #d0d0d0;">Regression API endpoint</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">GET /textgen</td>
                        <td style="padding: 12px;">GET</td>
                        <td style="padding: 12px; color: #d0d0d0;">Text generation interface</td>
                    </tr>
                    <tr style="border-bottom: 1px solid rgba(0, 212, 255, 0.1);">
                        <td style="padding: 12px;">POST /api/chat</td>
                        <td style="padding: 12px;">POST</td>
                        <td style="padding: 12px; color: #d0d0d0;">LLM chat endpoint</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="content-section">
            <div class="section-title">
                <i class="material-icons">help_outline</i>
                Troubleshooting
            </div>
            
            <h3>Port Already in Use</h3>
            <div class="code-block">
# Find process using port 7000
lsof -i :7000

# Kill the process
kill -9 <PID>
            </div>

            <h3>Docker Image Issues</h3>
            <div class="code-block">
# Remove old images
docker rmi aiops-flask-app:latest

# Rebuild with no cache
docker build --no-cache -t aiops-flask-app:latest .
            </div>

            <h3>LLM Connection Failed</h3>
            <p>Ensure LLM service is running on <code>http://127.0.0.1:1234</code>. Start it separately:</p>
            <div class="code-block">
# Using Ollama
ollama serve llama2

# Or using LM Studio (start from GUI)
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 AIOps Deployment Platform | Developed for Educational Purposes</p>
            <p>Last Updated: December 2024</p>
        </div>
    </div>
</body>
</html>